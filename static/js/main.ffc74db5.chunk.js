(this["webpackJsonpfake-store"]=this["webpackJsonpfake-store"]||[]).push([[0],{105:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(0),a=n.n(r),c=n(17),i=n(99),o=n.n(i),u=n(14),s=function(t){var e=a.a.useRef(),n=Object(c.b)(),r=t.id,i=Object(c.c)((function(t){return t.auth})).cart,s=a.a.useMemo((function(){return Boolean(i.find((function(t){return t.id===r})))}),[i,r]),l=a.a.useCallback((function(){return n(Object(u.k)(o()(t,["id","image","title"])))}),[n,t]),d=a.a.useCallback((function(){return n(Object(u.p)(o()(t,["id","image","title"])))}),[n,t]);return e.current=a.a.useMemo((function(){return{add:l,remove:d,isInCart:s}}),[l,d,s]),e.current}},14:function(t,e,n){"use strict";n.d(e,"e",(function(){return a})),n.d(e,"f",(function(){return c})),n.d(e,"d",(function(){return i})),n.d(e,"i",(function(){return o})),n.d(e,"n",(function(){return u})),n.d(e,"g",(function(){return j})),n.d(e,"o",(function(){return b})),n.d(e,"j",(function(){return f})),n.d(e,"q",(function(){return O})),n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return m})),n.d(e,"m",(function(){return p})),n.d(e,"a",(function(){return x})),n.d(e,"h",(function(){return S})),n.d(e,"k",(function(){return I})),n.d(e,"p",(function(){return A})),n.d(e,"l",(function(){return C}));var r=n(27),a="LOGIN_INIT",c="LOGIN_SUCCESS",i="LOGIN_FAIL",o="RESET_ERROR",u=function(t){return Object(r.a)({url:"/auth/login",method:"POST",data:t,onInit:s,onSuccess:l,onFailure:d})},s=function(){return{type:a}},l=function(t){return function(e){if(t.token)return e({type:c,data:t});setTimeout((function(){return e({type:o})}),2e3),e(d(t))}},d=function(t){return{type:i,data:t}},j="LOGOUT",b=function(){return localStorage.removeItem("user"),{type:j}},f="TOGGLE_IS_ADMIN",O=function(){return{type:f}},h="GET_CART_SUCCESS",m="GET_CART_FAIL",p=function(){return Object(r.a)({url:"/carts/user/1",method:"GET",onSuccess:v,onFailure:g})},v=function(t){return{type:h,data:[{id:3,title:"Mens Cotton Jacket",image:"https://fakestoreapi.com/img/71li-ujtlUL._AC_UX679_.jpg"}]}},g=function(t){return{type:m,data:t}},x="ADD_TO_CART",S="REMOVE_FROM_CART",I=function(t){return{type:x,data:t}},A=function(t){return{type:S,data:t}},C=function(){return function(t){var e=JSON.parse(localStorage.getItem("user"));t(e?l(e):d())}}},164:function(t,e,n){},165:function(t,e,n){},166:function(t,e,n){},167:function(t,e,n){},220:function(t,e,n){},221:function(t,e,n){},27:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){var e=t.url,n=void 0===e?"":e,r=t.method,a=void 0===r?"GET":r,c=t.data,i=void 0===c?null:c,o=t.onInit,u=void 0===o?null:o,s=t.onSuccess,l=void 0===s?null:s,d=t.onFailure;return{type:"API",url:n,method:a,data:i,onInit:u,onSuccess:l,onFailure:void 0===d?null:d}}},288:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(11),i=n.n(c),o=(n(164),n(165),n(48)),u=(n(166),n(327)),s=n(328),l=n(324),d=n(330),j=n(144),b=n.n(j),f=n(325),O=n(107),h=n.n(O),m=n(100),p=n.n(m),v=n(329),g=(n(167),n(335)),x=n(336),S=n(143),I=n.n(S),A=n(105),C=n(3);function E(t){var e=t.product,n=Object(A.a)(e).remove,r=a.a.useCallback((function(){return n()}),[n]);return Object(C.jsxs)("div",{className:"cart-popup-item",children:[Object(C.jsx)(x.a,{src:e.image,alt:e.id.toString(),variant:"square"}),"\xa0",Object(C.jsx)(l.a,{component:"span",noWrap:!0,children:e.title}),Object(C.jsx)(f.a,{color:"secondary",onClick:r,children:Object(C.jsx)(I.a,{})})]})}var y=a.a.memo(E);function T(t){var e=t.anchorEl,n=t.onClose,r=t.cart;return Object(C.jsx)(g.a,{id:"simple-popover",open:Boolean(e),anchorEl:e,onClose:n,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},className:"cart-popup-container",children:Object(C.jsx)(l.a,{component:"div",className:"cart-popup",children:r.map((function(t){return Object(C.jsx)(y,{product:t},t.id)}))})})}var k=a.a.memo(T),_=n(17),N=n(14),L=function(){var t=Object(_.c)((function(t){return t.auth})),e=t.cart,n=t.isAuth,r=t.isAdmin,c=Object(_.b)(),i=a.a.useState(null),j=Object(o.a)(i,2),O=j[0],m=j[1];a.a.useEffect((function(){0===e.length&&m(null)}),[e]);var g=a.a.useCallback((function(t){m(t.currentTarget)}),[]),x=a.a.useCallback((function(){m(null)}),[]),S=a.a.useCallback((function(){c(Object(N.o)())}),[c]),I=a.a.useCallback((function(){c(Object(N.q)())}),[c]);return Object(C.jsxs)(u.a,{position:"sticky",className:"header",color:"primary",elevation:5,variant:"elevation",children:[Object(C.jsxs)(s.a,{children:[Object(C.jsxs)(l.a,{variant:"h4",className:"title",children:[Object(C.jsx)(b.a,{fontSize:"large"}),"Fake Store"]}),Object(C.jsxs)("div",{className:"controls",children:[1===n&&Object(C.jsxs)(C.Fragment,{children:[!r&&Object(C.jsx)(f.a,{color:"inherit",onClick:g,disabled:0===e.length,children:Object(C.jsx)(v.a,{color:"secondary",badgeContent:e.length,showZero:!1,children:Object(C.jsx)(h.a,{})})}),Object(C.jsx)(d.a,{variant:"outlined",color:"inherit",startIcon:Object(C.jsx)(p.a,{}),onClick:S,children:"Logout"})]}),0===n&&Object(C.jsxs)(d.a,{id:"login-button",variant:"outlined",color:"inherit",onClick:I,startIcon:Object(C.jsx)(p.a,{}),children:["To ",r?"User Login":"Admin Login"]})]})]}),Object(C.jsx)(k,{onClose:x,anchorEl:O,cart:e})]})},G=a.a.memo(L),w=(n(220),n(289)),F=function(){return Object(C.jsx)(w.a,{component:"footer",className:"MuiAppBar-colorPrimary",square:!0,variant:"elevation",elevation:5,children:Object(C.jsxs)(l.a,{variant:"h6",component:"h6",children:["Fake store Pvt. Ltd. ",(new Date).getFullYear()]})})},U=a.a.memo(F),R=n(13),P=n(31),D=n(7),M=(n(221),n(145)),z=n.n(M),B=function(t,e){switch(e.rule){case"notNull":return t?null:"Field Should not be empty";case"maxLength":return t.length>e.length?"Max length reached(".concat(e.length,")"):null;case"minLength":return t.length<e.length?"Should meet minimum length(".concat(e.length,")"):null;case"email":return/^[a-zA-Z0-9-]+\w*@[a-zA-Z0-9-]+\.*[a-zA-Z0-9-]*\.[a-zA-Z0-9-]{2,}$/.test(t)?null:"Enter a valid Email";case"password":return/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{7,}$/.test(t)?null:"Should be min 7 letter password, with at least a symbol, upper and lower case letters and a number ";default:return!1}},q=n(334),Z=n(331);function J(){var t=Object(_.c)((function(t){return t.auth})),e=t.isAdmin,n=t.authError,c=t.isAuthenticating,i=Object(_.b)(),u=Object(r.useState)([{id:"el1",element:"input",type:"text",value:"",placeholder:"Full Name",label:"Name",validations:[{rule:"notNull"}],valid:!1,error:!1,show:!1},{id:"el2",element:"input",type:"text",value:"",placeholder:"Enter Username",label:"Username",validations:[{rule:"notNull"}],valid:!1,error:!1,show:!0},{id:"el3",element:"input",type:"password",value:"",placeholder:"Enter Password",label:"Password",validations:[{rule:"notNull"},{rule:"password"}],valid:!1,error:!1,show:!0}]),s=Object(o.a)(u,2),j=s[0],b=s[1],f=Object(r.useState)(!1),O=Object(o.a)(f,2),h=O[0],m=O[1],p=Object(r.useState)(!0),v=Object(o.a)(p,2),g=v[0],x=v[1],S=a.a.useCallback((function(t){var e=t.target.value,n=j.findIndex((function(e){return e.id===t.target.id})),r=Object(D.a)({},j[n]);if(r.value=e,r.validations)for(var a=0;a<r.validations.length;a++){if(r.error=B(e,r.validations[a]),r.error){r.valid=!1;break}r.valid=!0}var c=Object(P.a)(j);c[n]=r;for(var i=!0,o=0;o<c.length;o++)c[o].show&&(i=i&&c[o].valid);m(i),b(c)}),[j,m,b]),I=a.a.useCallback((function(t){for(var e=Object(P.a)(j),n=0;n<e.length;n++)e[n].error=null,e[n].valid=!0,e[n].value="";e[0].show=!e[0].show,b(e),x((function(t){return!t}))}),[j,b,x]),A=a.a.useCallback((function(){var t={username:j[1].value,password:j[2].value};i(Object(N.n)(t))}),[j,i]),E=a.a.useCallback((function(t){13!==t.which&&13!==t.keycode||!h||"el3"!==t.target.id||A()}),[h,A]);return Object(C.jsxs)("div",{className:"login",children:[Object(C.jsxs)(w.a,{className:"form ".concat(g?"signin":"signup"),variant:"elevation",square:!0,component:"form",elevation:15,children:[Object(C.jsx)(l.a,{variant:"h5",component:"h5",color:"primary",children:e?"ADMIN LOGIN":g?"SIGN IN":"SIGN UP"}),Object(C.jsx)(Z.a,{container:!0,spacing:5,alignItems:"center",justify:"center",children:j.map((function(t){return t.show&&Object(C.jsx)(Z.a,{item:!0,xs:12,className:"input",children:Object(C.jsx)(q.a,Object(D.a)(Object(D.a)({},z()(t,["valid","show"])),{},{helperText:t.error,error:Boolean(t.error),onChange:S,autoComplete:"off",variant:"standard",disabled:c,fullWidth:!0,required:!0,color:"primary",onKeyPress:E}))},t.id)}))}),Object(C.jsx)(d.a,{variant:"contained",color:"primary",disabled:!h||c,onClick:A,children:c?"Authenticating...":g?"SIGN IN":"SIGN UP"}),!e&&Object(C.jsxs)(l.a,{children:[g?"Not a user ?":"Switch back to"," ",Object(C.jsx)(d.a,{variant:"text",color:"secondary",onClick:I,children:g?"SIGN UP":"SIGN IN"})]}),n&&Object(C.jsx)(l.a,{color:"error",children:n})]}),g&&Object(C.jsxs)(w.a,{variant:"elevation",square:!0,elevation:5,className:"credsBox",children:[Object(C.jsx)(l.a,{children:"Credentials:"}),Object(C.jsxs)(l.a,{children:["Username: ",e?"hopkins":"johnd"]}),Object(C.jsxs)(l.a,{children:["Password: ",e?"William56$hj":"m38rmF$"," "]})]})]})}var $=a.a.memo(J),W=n(332),Y=a.a.lazy((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,369))})),K=a.a.lazy((function(){return n.e(5).then(n.bind(null,367))}));var V=function(){var t=Object(_.c)((function(t){return t.auth})),e=t.isAuth,n=t.isAdmin;return-1===e?Object(C.jsx)("div",{className:"loader",children:Object(C.jsx)(W.a,{})}):0===e?Object(C.jsxs)(R.d,{children:[Object(C.jsx)(R.b,{path:"/login",exact:!0,component:$}),Object(C.jsx)(R.a,{from:"/",to:"/login"})]}):n?Object(C.jsx)(r.Suspense,{fallback:Object(C.jsx)("div",{}),children:Object(C.jsxs)(R.d,{children:[Object(C.jsx)(R.b,{path:"/users",component:K}),Object(C.jsx)(R.a,{from:"/",to:"/users"})]})}):Object(C.jsx)(r.Suspense,{fallback:Object(C.jsx)("div",{}),children:Object(C.jsxs)(R.d,{children:[Object(C.jsx)(R.b,{path:"/products",component:Y}),Object(C.jsx)(R.a,{from:"/",to:"/products"})]})})},X=n(333),H=n(147);var Q=function(){var t=function(){var t=a.a.useRef(),e=Object(H.a)({palette:{primary:{light:"#8561c5",main:"#673ab7",dark:"#482880",contrastText:"#fff"}}}),n=Object(H.a)({palette:{primary:{light:"#33bfff",main:"#00b0ff",dark:"#007bb2",contrastText:"#000"}}}),r=Object(_.c)((function(t){return t.auth})).isAdmin;return t.current=a.a.useMemo((function(){return r?n:e}),[r,e,n]),t.current}(),e=Object(_.b)(),n=Object(R.h)().pathname;return a.a.useEffect((function(){e(Object(N.l)())}),[e]),a.a.useEffect((function(){window.scroll(0,0)}),[n]),Object(C.jsx)(X.a,{theme:t,children:Object(C.jsxs)("div",{className:"App",id:"App",children:[Object(C.jsx)(G,{}),Object(C.jsx)("main",{children:Object(C.jsx)(V,{})}),Object(C.jsx)(U,{})]})})},tt=function(t){t&&t instanceof Function&&n.e(6).then(n.bind(null,366)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),c(t),i(t)}))},et=n(57),nt=n(38),rt=n(146),at={userId:null,isAuth:-1,token:null,cart:[],authError:null,isAdmin:!1,isAuthenticating:!1},ct=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case N.e:return Object(D.a)(Object(D.a)({},t),{},{isAuthenticating:!0});case N.f:var n=e.data,r=n.token,a=n.isAdmin;return localStorage.setItem("user",JSON.stringify({token:r,isAdmin:void 0!==a?a:t.isAdmin})),Object(D.a)(Object(D.a)({},t),{},{isAuth:1,token:r,isAuthenticating:!1,isAdmin:void 0!==a?a:t.isAdmin});case N.d:return Object(D.a)(Object(D.a)({},t),{},{authError:e.data&&e.data.msg,isAuth:0,isAuthenticating:!1});case N.g:return Object(D.a)(Object(D.a)({},t),{},{isAuth:0,userId:!1,email:!1,isAdmin:!1});case N.j:return Object(D.a)(Object(D.a)({},t),{},{isAdmin:!t.isAdmin,error:null});case N.c:return Object(D.a)(Object(D.a)({},t),{},{cart:e.data});case N.b:return Object(D.a)(Object(D.a)({},t),{},{cart:[],error:e.data});case N.a:return Object(D.a)(Object(D.a)({},t),{},{cart:[].concat(Object(P.a)(t.cart),[e.data])});case N.h:var c=Object(P.a)(t.cart),i=c.findIndex((function(t){return parseInt(t.id)===parseInt(e.data.id)}));return c.splice(i,1),Object(D.a)(Object(D.a)({},t),{},{cart:c});case N.i:return Object(D.a)(Object(D.a)({},t),{},{authError:null});default:return Object(D.a)({},t)}},it=n(30),ot={productList:[],isLoading:!1,categories:[],error:null},ut=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case it.d:return Object(D.a)(Object(D.a)({},t),{},{productList:[],isLoading:!0,error:null});case it.e:return Object(D.a)(Object(D.a)({},t),{},{productList:e.data,isLoading:!1});case it.c:return Object(D.a)(Object(D.a)({},t),{},{error:e.data,isLoading:!1});case it.b:return Object(D.a)(Object(D.a)({},t),{},{categories:e.data});case it.a:return Object(D.a)(Object(D.a)({},t),{},{categories:[]});case it.g:return Object(D.a)(Object(D.a)({},t),{},{productList:[].concat(Object(P.a)(t.productList),[e.data])});case it.f:return Object(D.a)(Object(D.a)({},t),{},{error:e.data});default:return t}},st=n(75),lt={userList:[],isLoading:!1,error:null},dt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case st.b:return Object(D.a)(Object(D.a)({},t),{},{userList:[],isLoading:!0,error:null});case st.c:return Object(D.a)(Object(D.a)({},t),{},{userList:e.data.results,isLoading:!1});case st.a:return Object(D.a)(Object(D.a)({},t),{},{error:e.data,isLoading:!1});default:return t}},jt=n(56),bt=n(103),ft=n.n(bt);ft.a.defaults.baseURL="https://fakestoreapi.com";var Ot=Object(nt.c)({auth:ct,products:ut,admin:dt}),ht=nt.d,mt=Object(nt.e)(Ot,ht(Object(nt.a)((function(t){var e=t.dispatch;return function(t){return function(n){if("API"===n.type){var r,a=n.url,c=n.method,i=n.data,o=n.onInit,u=n.onSuccess,s=n.onFailure,l=(r={url:a,method:c},Object(jt.a)(r,"GET"===c?"params":"data",i),Object(jt.a)(r,"headers",{"Access-Control-Allow-Origin":"*"}),r);return o&&e(o()),ft.a.request(l).then((function(t){return u&&e(u(t.data)),t.data})).catch((function(t){var n=t.response?t.response.data:t.data;return s&&e(s(n)),n}))}t(n)}}}),rt.a)));i.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(et.a,{children:Object(C.jsx)(_.a,{store:mt,children:Object(C.jsx)(Q,{})})})}),document.getElementById("root")),tt()},30:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return c})),n.d(e,"c",(function(){return i})),n.d(e,"j",(function(){return o})),n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return j})),n.d(e,"h",(function(){return b})),n.d(e,"g",(function(){return h})),n.d(e,"f",(function(){return m})),n.d(e,"i",(function(){return p}));var r=n(27),a="GET_PRODUCTS_INIT",c="GET_PRODUCTS_SUCCESS",i="GET_PRODUCTS_FAIL",o=function(t){return Object(r.a)({url:t?"/products/category/".concat(t):"/products",method:"GET",onInit:u,onSuccess:s,onFailure:l})},u=function(){return{type:a}},s=function(t){return{type:c,data:t}},l=function(t){return{type:i,data:t}},d="GET_CATEGORIES_SUCCESS",j="GET_CATEGORIES_FAIL",b=function(){return Object(r.a)({url:"/products/categories",method:"GET",onSuccess:f,onFailure:O})},f=function(t){return{type:d,data:t}},O=function(t){return{type:j,data:t}},h="GET_PRODUCT_BY_ID_SUCCESS",m="GET_PRODUCT_BY_ID_FAIL",p=function(t){return Object(r.a)({url:"/products/".concat(t),method:"GET",onSuccess:v,onFailure:g})},v=function(t){return{type:h,data:t}},g=function(t){return{type:m,data:t}}},75:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return o}));var r=n(27),a="GET_USERS_INIT",c="GET_USERS_SUCCESS",i="GET_USERS_FAIL",o=function(){return Object(r.a)({url:"".concat("https://randomuser.me/api","/"),method:"GET",data:{results:50},onInit:u,onSuccess:s,onFailure:l})},u=function(){return{type:a}},s=function(t){return{type:c,data:t}},l=function(t){return{type:i,data:t}}}},[[288,1,2]]]);
//# sourceMappingURL=main.ffc74db5.chunk.js.map